{
	"id": "linux-modbus-genset-connector.json",
	"name": "Linux Gateway with Modbus Connector",
	"type": "GREENGRASS",
	"spec": {
		"CoreDefinitionVersion": {
			"Cores": [
				{
					"CertificateArn": "[CORE_CERTIFICATE_ARN]",
					"SyncShadow": true,
					"ThingArn": "[CORE_ARN]"
				}
			]
		},
		"FunctionDefinitionVersion": {
			"Functions": [
				{
					"FunctionArn": "arn:aws:lambda:::function:GGIPDetector:1",
					"FunctionConfiguration": {
						"Environment": {
							"AccessSysfs": true,
							"Variables": {}
						},
						"MemorySize": 32768,
						"Pinned": true,
						"Timeout": 3
					}
				},
				{
					"FunctionArn": "arn:aws:lambda:[AWS_REGION]:[AWS_ACCOUNT]:function:Sputnik-ModbusGensetSimulator:prod",
					"FunctionConfiguration": {
						"Environment": {
							"AccessSysfs": true,
							"Variables": {}
						},
						"MemorySize": 32768,
						"Pinned": true,
						"Timeout": 25
					}
				},
				{
					"FunctionArn": "arn:aws:lambda:[AWS_REGION]:[AWS_ACCOUNT]:function:Sputnik-ModbusGenericClient:prod",
					"FunctionConfiguration": {
						"Environment": {
							"AccessSysfs": true,
							"Variables": {
								"THING_NAME": "[CORE]",
								"NAMESPACE": "[NAMESPACE]",
								"MODBUS_MAPPING": "[MODBUS_MAPPING]"
							}
						},
						"MemorySize": 32768,
						"Pinned": true,
						"Timeout": 25
					}
				},
				{
					"FunctionArn": "arn:aws:lambda:[AWS_REGION]:[AWS_ACCOUNT]:function:Sputnik-ModbusCommandHandler:prod",
					"FunctionConfiguration": {
						"Environment": {
							"AccessSysfs": true,
							"Variables": {
								"THING_NAME": "[CORE]",
								"MODBUS_MAPPING": "[MODBUS_MAPPING]"
							}
						},
						"MemorySize": 32768,
						"Pinned": false,
						"Timeout": 25
					}
				}
			]
		},
		"SubscriptionDefinitionVersion": {
			"Subscriptions": [
				{
					"Target": "cloud",
					"Source": "arn:aws:lambda:[AWS_REGION]:[AWS_ACCOUNT]:function:Sputnik-ModbusGenericClient:prod",
					"Subject": "[NAMESPACE]/data/+"
				},
				{
					"Target": "cloud",
					"Source": "arn:aws:lambda:[AWS_REGION]:[AWS_ACCOUNT]:function:Sputnik-ModbusGenericClient:prod",
					"Subject": "[DEFAULT_NAMESPACE]/data/+"
				},
				{
					"Target": "arn:aws:lambda:[AWS_REGION]:[AWS_ACCOUNT]:function:Sputnik-ModbusCommandHandler:prod",
					"Source": "cloud",
					"Subject": "[CORE]/command"
				},
				{
					"Target": "GGShadowService",
					"Source": "arn:aws:lambda:[AWS_REGION]:[AWS_ACCOUNT]:function:Sputnik-ModbusCommandHandler:prod",
					"Subject": "[CORE]/command"
				}
			]
		},
		"LoggerDefinitionVersion": {
			"Loggers": [
				{
					"Component": "GreengrassSystem",
					"Level": "INFO",
					"Type": "AWSCloudWatch"
				},
				{
					"Component": "Lambda",
					"Level": "INFO",
					"Type": "AWSCloudWatch"
				},
				{
					"Component": "GreengrassSystem",
					"Level": "INFO",
					"Space": 300000,
					"Type": "FileSystem"
				},
				{
					"Component": "Lambda",
					"Level": "INFO",
					"Space": 300000,
					"Type": "FileSystem"
				}
			]
		}
	}
}
